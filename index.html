<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script type="text/javascript" src="https://rawgit.com/srhyne/jQuery-Parse/master/jquery.parse.js"></script>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
		<link href="//netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css" rel="stylesheet"> 
		<link rel="stylesheet" type="text/css" href="style.css">

	</head>

	<body>
	<br>
	<h1>Age of Innocence</h1> <br> <br>
  
	  <button class="btn btn-success btn-large" id="b1"><i class="icon-folder-open"></i> Quote 1</button> <br> <br><br>
	  <button class="btn btn-success btn-large" id="b2"><i class="icon-folder-open"></i> Quote 2</button> <br> <br><br>
	  <button class="btn btn-success btn-large" id="b3"><i class="icon-folder-open"></i> Quote 3</button> <br> <br><br>
	  <button class="btn btn-success btn-large" id="b4"><i class="icon-folder-open"></i> Quote 4</button> <br> <br>

		<p>Current Character:</p><p id="cylinder" style="color:orange"></p> <br>
		<p>Player Score:</p><p id="cardboard"></p> <br>
		<p>Class Score:</p><p id="player"></p> <br>
		
		<button class="btn btn-success btn-medium" id="b5"><i class="icon-folder-open"></i> New Game</button> <br> <br><br>


		<script type="text/javascript">
			var quotes1 = ["\"Yes it is awfully convenient that you should be able to meet Ellen after all\"", 
			"He pulled the sash down and turned back. Catch my death! He echoed and he felt like adding: \
			\"but Ive caught it already. I am dead Ive been dead for months and months\"", "She was persuaded \
			that irrepressible passion was the cause of his impatience, and being an ardent \
			admirer of impulsiveness, she always received him with a \
			genial twinkle of complicity and a play of allusion to \
			which May seemed fortunately impervious", "\"The real loneliness is living among all these kind people who only ask one to pretend!\""];
			
			var quotes2 = ["\"We can't behave like people in novels though, can we?\"", "\"Each time you happen to me all over again\"", "She had lived in affluence \
			for half a century; but memories of her early \
			straits had made her excessively thrifty, and though \
			when she bought a dress or a piece of furniture she \
			took care that it should be of the best, she could not \
			bring herself to spend much on the transient pleasures \
			of the table", "\"And you'll sit beside me, and \
			we'll look not at visions but at realities\""];
			
			var buttons = ["#b1", "#b2", "#b3", "#b4"];
			var quotevalue = Math.round(Math.random());
			console.log(quotevalue);
			if (quotevalue == 0)
			{
				shuffle(quotes1);
				console.log(quotes1);
				for(var i = 0; i<=3; i++) 
				{
				$(buttons[i]).html(quotes1[i]);
				}	
			}
			if (quotevalue == 1)
			{
				shuffle(quotes2);
				console.log(quotes2);
				for(var i = 0; i<=3; i++) 
				{
				$(buttons[i]).html(quotes2[i]);
				}
			}
			function shuffle(array) {
			  var currentIndex = array.length, temporaryValue, randomIndex ;
			  // While there remain elements to shuffle...
			  while (0 !== currentIndex) {
			    // Pick a remaining element...
			    randomIndex = Math.floor(Math.random() * currentIndex);
			    currentIndex -= 1;
			    // And swap it with the current element.
			    temporaryValue = array[currentIndex];
			    array[currentIndex] = array[randomIndex];
			    array[randomIndex] = temporaryValue;
			  }
			  return array;
			}
			$.parse.init({
			    app_id : "LCM2uCbTlZJL2IWDT8FBzovbabjOq2qrglnsA0ur", // <-- enter your Application Id here 
			    rest_key : "DHz51VyzLpFjKKLioKGTEkNoGSc6WEPxKQtQxm6K" // <--enter your REST API Key here    
			});
			var cylval;
			var cardboardval;
			var playerval = 0;
			window.setInterval(function() {
				$.parse.get("TestObject", function(json) {
					var results = json.results;
					cylval = results.slice(-1)[0].cylinder;
					if ($("#cylinder").text() != cylval) {
						$("#cylinder").empty();
						$("#cylinder").append(cylval);
					}
				});
			}, 200);
			window.setInterval(function() {
				$.parse.get("QuoteObject", function(json) {
					var results = json.results;
					cardboardval = results.slice(-1)[0].cardboard;
					if ($("#cardboard").text() != cardboardval) {
						$("#cardboard").empty();
						$("#cardboard").append(cardboardval);
					}
				});
			}, 200);
			window.setInterval(function() {
					if ($("#player").text() != playerval) {
						$("#player").empty();
						$("#player").append(playerval);
					}
			}, 200);
			$('#b1').click(function() {
        		var text = $(this).text();
        		console.log(text);
        		var myRegExp1 = /sash/;
        		var myRegExp2 = /happen/;
        		var myRegExp3 = /convenient/;
        		var myRegExp4 = /behave/;
        		var myRegExp5 = /irrepressible/;
        		var myRegExp6 = /pleasures/;
        		var myRegExp7 = /pretend/;
        		var myRegExp8 = /visions/;
			var matchPos1 = text.search(myRegExp1);
			var matchPos2 = text.search(myRegExp2);
			var matchPos3 = text.search(myRegExp3);
			var matchPos4 = text.search(myRegExp4);
			var matchPos5 = text.search(myRegExp5);
			var matchPos6 = text.search(myRegExp6);
			var matchPos7 = text.search(myRegExp7);
			var matchPos8 = text.search(myRegExp8);
        		if ((matchPos1 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos2 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos3 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos4 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos5 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos6 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos7 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else if ((matchPos8 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else 
        		{
        			playerval--;
        		}
        		});
        	$('#b2').click(function() {
        		var text = $(this).text();
        		console.log(text);
        		var myRegExp1 = /sash/;
        		var myRegExp2 = /happen/;
        		var myRegExp3 = /convenient/;
        		var myRegExp4 = /behave/;
        		var myRegExp5 = /irrepressible/;
        		var myRegExp6 = /pleasures/;
        		var myRegExp7 = /pretend/;
        		var myRegExp8 = /visions/;
			var matchPos1 = text.search(myRegExp1);
			var matchPos2 = text.search(myRegExp2);
			var matchPos3 = text.search(myRegExp3);
			var matchPos4 = text.search(myRegExp4);
			var matchPos5 = text.search(myRegExp5);
			var matchPos6 = text.search(myRegExp6);
			var matchPos7 = text.search(myRegExp7);
			var matchPos8 = text.search(myRegExp8);
        		if ((matchPos1 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos2 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos3 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos4 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos5 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos6 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos7 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else if ((matchPos8 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else 
        		{
        			playerval--;
        		}
        	});
        	$('#b3').click(function() {
        		var text = $(this).text();
        		console.log(text);
        		var myRegExp1 = /sash/;
        		var myRegExp2 = /happen/;
        		var myRegExp3 = /convenient/;
        		var myRegExp4 = /behave/;
        		var myRegExp5 = /irrepressible/;
        		var myRegExp6 = /pleasures/;
        		var myRegExp7 = /pretend/;
        		var myRegExp8 = /visions/;
			var matchPos1 = text.search(myRegExp1);
			var matchPos2 = text.search(myRegExp2);
			var matchPos3 = text.search(myRegExp3);
			var matchPos4 = text.search(myRegExp4);
			var matchPos5 = text.search(myRegExp5);
			var matchPos6 = text.search(myRegExp6);
			var matchPos7 = text.search(myRegExp7);
			var matchPos8 = text.search(myRegExp8);
        		if ((matchPos1 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos2 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos3 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos4 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos5 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos6 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos7 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else if ((matchPos8 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else 
        		{
        			playerval--;
        		}
        	});
        	$('#b4').click(function() {
        		var text = $(this).text();
        		console.log(text);
        		var myRegExp1 = /sash/;
        		var myRegExp2 = /happen/;
        		var myRegExp3 = /convenient/;
        		var myRegExp4 = /behave/;
        		var myRegExp5 = /irrepressible/;
        		var myRegExp6 = /pleasures/;
        		var myRegExp7 = /pretend/;
        		var myRegExp8 = /visions/;
			var matchPos1 = text.search(myRegExp1);
			var matchPos2 = text.search(myRegExp2);
			var matchPos3 = text.search(myRegExp3);
			var matchPos4 = text.search(myRegExp4);
			var matchPos5 = text.search(myRegExp5);
			var matchPos6 = text.search(myRegExp6);
			var matchPos7 = text.search(myRegExp7);
			var matchPos8 = text.search(myRegExp8);
        		if ((matchPos1 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos2 != -1) && (($("#cylinder").text()) == "newland") )
        		{
        			playerval++;
        		}
        		else if ((matchPos3 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos4 != -1) && (($("#cylinder").text()) == "may") )
        		{
        			playerval++;
        		}
        		else if ((matchPos5 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos6 != -1) && (($("#cylinder").text()) == "mingott") )
        		{
        			playerval++;
        		}
        		else if ((matchPos7 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else if ((matchPos8 != -1) && (($("#cylinder").text()) == "ellen") )
        		{
        			playerval++;
        		}
        		else 
        		{
        			playerval--;
        		}
        	});
			$('#b5').click(function() {
        		playerval = 0;
				$.parse.post("QuoteObject", { cardboard: "0" }, function(json) { 
     			task.data('id', json.objectId);
    			});
    			if (quotevalue == 0)
			{
				shuffle(quotes2);
				console.log(quotes2);
				for(var i = 0; i<=3; i++) 
				{
				$(buttons[i]).html(quotes2[i]);
				}
				quotevalue = 1;
			}
			else
			{
				shuffle(quotes1);
				console.log(quotes1);
				for(var i = 0; i<=3; i++) 
				{
				$(buttons[i]).html(quotes1[i]);
				}
				quotevalue = 0;
			}
			});
		</script>
	</body>
</html>
